<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>REUNI Email Preview</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      background-color: #f0f0f0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
    }
    h1 {
      color: #333;
      border-bottom: 2px solid #FF3B30;
      padding-bottom: 10px;
    }
    .email-preview {
      border: 2px solid #ddd;
      border-radius: 12px;
      overflow: hidden;
      margin: 20px 0;
    }
    .instructions {
      background: #fff7ed;
      border-left: 4px solid #f59e0b;
      padding: 16px;
      margin: 20px 0;
      border-radius: 4px;
    }
    code {
      background: #f5f5f5;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: monospace;
      font-size: 14px;
    }
    .note {
      background: #eff6ff;
      border-left: 4px solid #3b82f6;
      padding: 12px;
      margin: 10px 0;
      border-radius: 4px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“§ REUNI Email Preview Tool</h1>

    <div class="instructions">
      <h3>How to Preview Your Emails</h3>
      <ol>
        <li>Open <code>/supabase/functions/send-purchase-email/index.ts</code></li>
        <li>Find the <code>generateBuyerEmail()</code> function (line 139)</li>
        <li>Copy all the HTML from <code>return `...`</code></li>
        <li>Paste it below in the preview iframe</li>
        <li>Refresh this page to see your changes</li>
      </ol>
    </div>

    <h2>Buyer Confirmation Email Preview</h2>
    <div class="note">
      ğŸ‘‡ This is how the buyer will see the email after purchasing a ticket
    </div>

    <div class="email-preview">
      <iframe
        srcdoc='
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Purchase Confirmation</title>
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif; background-color: #f5f5f5;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">

          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, #FF3B30 0%, #FF6B6B 100%); padding: 40px 40px 30px; border-radius: 12px 12px 0 0; text-align: center;">
              <h1 style="margin: 0; color: #ffffff; font-size: 32px; font-weight: 700;">âœ… Purchase Confirmed!</h1>
              <p style="margin: 10px 0 0; color: rgba(255,255,255,0.9); font-size: 16px;">Your ticket is ready</p>
            </td>
          </tr>

          <!-- Greeting -->
          <tr>
            <td style="padding: 40px 40px 20px;">
              <p style="margin: 0; color: #333; font-size: 18px; line-height: 1.6;">Hi John Smith,</p>
              <p style="margin: 16px 0 0; color: #666; font-size: 16px; line-height: 1.6;">
                Great news! You have successfully purchased 1 ticket for <strong style="color: #333;">Spring Formal Dance</strong>.
              </p>
            </td>
          </tr>

          <!-- Event Details Card -->
          <tr>
            <td style="padding: 0 40px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f8f9fa; border-radius: 8px; border-left: 4px solid #FF3B30;">
                <tr>
                  <td style="padding: 24px;">
                    <h2 style="margin: 0 0 16px; color: #333; font-size: 20px; font-weight: 600;">Event Details</h2>

                    <table width="100%" cellpadding="8" cellspacing="0">
                      <tr>
                        <td style="color: #666; font-size: 14px; padding: 8px 0;">ğŸ“… Date & Time:</td>
                        <td style="color: #333; font-size: 14px; font-weight: 600; text-align: right; padding: 8px 0;">Friday, 15 November 2025, 22:00</td>
                      </tr>
                      <tr>
                        <td style="color: #666; font-size: 14px; padding: 8px 0;">ğŸ“ Location:</td>
                        <td style="color: #333; font-size: 14px; font-weight: 600; text-align: right; padding: 8px 0;">Stealth Nightclub, Nottingham</td>
                      </tr>
                      <tr>
                        <td style="color: #666; font-size: 14px; padding: 8px 0;">ğŸ« Ticket Type:</td>
                        <td style="color: #333; font-size: 14px; font-weight: 600; text-align: right; padding: 8px 0;">General Admission</td>
                      </tr>
                      <tr>
                        <td style="color: #666; font-size: 14px; padding: 8px 0;">ğŸ”¢ Quantity:</td>
                        <td style="color: #333; font-size: 14px; font-weight: 600; text-align: right; padding: 8px 0;">1</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>

          <!-- Payment Details -->
          <tr>
            <td style="padding: 24px 40px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f0fdf4; border-radius: 8px; border-left: 4px solid #22c55e;">
                <tr>
                  <td style="padding: 24px;">
                    <h3 style="margin: 0 0 12px; color: #333; font-size: 18px; font-weight: 600;">Payment Summary</h3>
                    <table width="100%" cellpadding="6" cellspacing="0">
                      <tr>
                        <td style="color: #666; font-size: 16px;">Total Paid:</td>
                        <td style="color: #22c55e; font-size: 20px; font-weight: 700; text-align: right;">Â£65.00</td>
                      </tr>
                      <tr>
                        <td style="color: #666; font-size: 13px; padding-top: 8px;">Transaction ID:</td>
                        <td style="color: #666; font-size: 13px; text-align: right; font-family: monospace; padding-top: 8px;">txn_1234567890</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>

          <!-- Ticket Screenshot -->
          <tr>
            <td style="padding: 0 40px 32px;">
              <h3 style="margin: 0 0 16px; color: #333; font-size: 18px; font-weight: 600;">ğŸ« Your Ticket</h3>
              <p style="margin: 0 0 16px; color: #666; font-size: 14px;">
                Here is a copy of your ticket. We recommend saving this image or printing it as a backup.
              </p>
              <div style="background-color: #f8f9fa; border-radius: 12px; padding: 20px; text-align: center;">
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 300px; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px;">
                  [Ticket Barcode Image Would Appear Here]
                </div>
                <p style="margin: 16px 0 0; color: #999; font-size: 12px;">
                  ğŸ’¡ Tip: Save this image to your phone for quick access at the venue
                </p>
              </div>
            </td>
          </tr>

          <!-- Next Steps -->
          <tr>
            <td style="padding: 0 40px 32px;">
              <h3 style="margin: 0 0 16px; color: #333; font-size: 18px; font-weight: 600;">ğŸ“± Next Steps</h3>
              <ol style="margin: 0; padding-left: 20px; color: #666; font-size: 15px; line-height: 1.8;">
                <li>Save the ticket image above to your phone</li>
                <li>Or access it anytime in the REUNI app â†’ "My Purchases"</li>
                <li>Present the barcode at the event entrance</li>
                <li>Have a great time! ğŸ‰</li>
              </ol>
            </td>
          </tr>

          <!-- Protection Notice -->
          <tr>
            <td style="padding: 0 40px 32px;">
              <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #fff7ed; border-radius: 8px; border-left: 4px solid #f59e0b;">
                <tr>
                  <td style="padding: 20px;">
                    <h4 style="margin: 0 0 8px; color: #92400e; font-size: 15px; font-weight: 600;">ğŸ›¡ï¸ Buyer Protection</h4>
                    <p style="margin: 0; color: #92400e; font-size: 13px; line-height: 1.6;">
                      Your payment is held securely in escrow for 7 days. If there is any issue with your ticket, you can report it and request a refund.
                    </p>
                    <p style="margin: 8px 0 0; color: #92400e; font-size: 13px; line-height: 1.6;">
                      <strong>âœ… Backup Copy:</strong> Your ticket is saved in this email, in the REUNI app, and on our secure servers. You have multiple copies for peace of mind.
                    </p>
                  </td>
                </tr>
              </table>
            </td>
          </tr>

          <!-- Support -->
          <tr>
            <td style="padding: 0 40px 40px;">
              <p style="margin: 0; color: #666; font-size: 14px; text-align: center; line-height: 1.6;">
                Questions or issues? Reply to this email or contact us at <a href="mailto:support@reuni.app" style="color: #FF3B30; text-decoration: none;">support@reuni.app</a>
              </p>
            </td>
          </tr>

          <!-- Footer -->
          <tr>
            <td style="padding: 24px 40px; background-color: #f8f9fa; border-radius: 0 0 12px 12px; text-align: center;">
              <p style="margin: 0; color: #999; font-size: 12px;">
                Â© 2025 REUNI. All rights reserved.<br>
                Secure student ticket marketplace.
              </p>
            </td>
          </tr>

        </table>
      </td>
    </tr>
  </table>
</body>
</html>
        '
        style="width: 100%; height: 800px; border: none;"
      ></iframe>
    </div>

    <div class="instructions">
      <h3>ğŸ“ Customization Tips</h3>
      <ul>
        <li><strong>Change colors:</strong> Replace <code>#FF3B30</code> (red) with your brand color</li>
        <li><strong>Update sender:</strong> Change <code>tickets@reuni.app</code> to your verified domain</li>
        <li><strong>Modify text:</strong> Edit any text in the HTML template</li>
        <li><strong>Add logo:</strong> Insert <code>&lt;img src="your-logo-url"&gt;</code> in the header</li>
      </ul>
    </div>

    <div class="note">
      <strong>ğŸ’¡ Pro Tip:</strong> After making changes, deploy with:<br>
      <code>supabase functions deploy send-purchase-email</code>
    </div>
  </div>
</body>
</html>
